# Chapter 2. TCP/IP의 데이터를 전기 신호로 만들어 보낸다

## 개요

오늘 알아볼 내용은 TCP/IP 계층에 대해 다루며 전체적인 히스토리는 아래와 같습니다.

### 1. 소켓을 작성

### 2. 서버에 접속

### 3. 데이터를 송수신

### 4. 소켓 말소

### 5. IP와 이더넷 패킷

### 6. UDP 프로토콜

## 1. 소켓을 작성한다.

### (1) 프로토콜 스택의 내부 구성

- 패킷? 데이터를 작게 나눈 덩어리를 의미
- ARP? ‘아프' 수신처 라우터의 MAC 주소를 조사하는 프로토콜
- MAC주소? LAN방식의 기기가 사용하는 같은 형식의 물리적 주소

### (2) 소켓의 실체는 통신 제어용 제어 정보

통신 상대의 IP 주소, 포트 번호 등 여러 가지 제어 정보를 기록한 메모리 영역이 소켓의 실체
프로토콜 스택은 소켓에 기록된 제어 정보를 참조하면서 움직입니다.

윈도우에서 netstat을 쳤을 때
위에서 보는 한 행이 하나의 소켓에 해당합니다.

즉, 소켓을 만든다는 동작은 여기에 새로 한 행의 제어 정보를 추가하고 통신을 준비하는 작업입니다.

여기서 0.0.0.0인 것은 아직 통신이 시작되지 않았기 때문에 IP주소가 정해져 있지 않은 것입니다.

### (3) Socket을 호출했을 때의 동작

여기서 잠깐!

'Socket'은 Socket 라이브러리를 가리키고,

'socket'은 그 라이브러리 안에 있는 socket이라는 프로그램을 가리키며,

'소켓'이라고 하면 파이프의 양끝에 있는 출입구를 가리킵니다.

브라우저가 socket이나 connect라는 Socket 라이브러리의 프로그램 부품을 호출했을 때 프로토콜 스택의 내부가 어떻게 움직이는지 살펴보겠습니다.

처음은 소켓을 만드는 단계입니다.

애플리케이션이 socket을 호출하면 프로토콜 스택은 의뢰에 따라 한 개의 소켓을 만듭니다.

그리고 소켓을 만들 때 한 개의 메모리 영역을 확보하고 초기 상태라는 것을 이 영역에 기록합니다.

소켓이 만들어지면 소켓을 나타내는 디스크립터를 애플리케이션에 알려줍니다. (디스크립터란 다수의 소켓 중 어느 것을 가리키는지 나타내는 번호표와 같은 정보입니다.)

디스크립터를 받은 애플리케이션은 프로토콜 스택에 송수신을 의뢰할 때 디스크립터를 통지합니다.

프로토콜 스택은 어느 소켓인지만 알면 필요한 정보를 모두 알 수 있기 때문에 일일이 통신 상대의 정보를 통지받을 필요가 없어집니다.

### test2
